## Bases de datos empleados_simple y departamentos ##

drop database if exists empleados_simple;

create database if not exists empleados_simple;
use empleados_simple;

## CREATES ##

# Tablas de entidades

CREATE TABLE IF NOT EXISTS empleados 
(cif VARCHAR(9) NOT NULL, 
nombre VARCHAR(20), 
apellidos VARCHAR(20), 
edad INTEGER, 
primary key (cif));

grant all on empleados_simple.* to maza@localhost identified by 'maza';

INSERT INTO empleados (cif, nombre, apellidos, edad) VALUES
("34334789H", "Antonio", "Martín", 23),
("21094387T", "Juan", "González", 40),
("01293474E", "Isabel", "Fuentes", 18),
("23948745F", "Lucille", "King", 25),
("40948574G", "Neo", "Preno", 12);

### departamentos ###

drop database if exists departamentos;

create database if not exists departamentos;
use departamentos;

## CREATES ##

# Tablas de entidades

CREATE TABLE IF NOT EXISTS `departamentos` (
  `id` VARCHAR(10) NOT NULL,
  `descripcion` VARCHAR(45) NULL,
  PRIMARY KEY (`id`));
  
CREATE TABLE IF NOT EXISTS `empleados_departamentos` (
  `cif` VARCHAR(10) NOT NULL,
  `id_departamento` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`cif`, `id_departamento`),
  CONSTRAINT `fk_empleados_departamentos_1`
    FOREIGN KEY (`id_departamento`)
    REFERENCES `departamentos`.`departamentos` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

grant all on departamentos.* to maza@localhost identified by 'maza';

INSERT INTO departamentos (id, descripcion) VALUES
("RRHH", "Recursos Humanos"),
("I+D", "Investigación y Desarrollo");

INSERT INTO empleados_departamentos (cif, id_departamento) VALUES
("34334789H", "RRHH"),
("21094387T", "RRHH"),
("01293474E", "I+D"),
("23948745F", "I+D"),
("40948574G", "I+D");
